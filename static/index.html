<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Streaming Audio Playback</title>
</head>
<body>
  <h1>Streaming Audio Playback</h1>
  <form id="promptForm">
    <label for="promptInput">Enter Prompt:</label><br>
    <textarea id="promptInput" rows="4" cols="50" placeholder="Type your prompt here" required></textarea><br>
    <label for="voiceSelect">Select Voice:</label><br>
    <select id="voiceSelect">
      <option value="tara" selected>tara</option>
      <option value="zoe">zoe</option>
      <option value="zac">zac</option>
      <option value="jess">jess</option>
      <option value="leo">leo</option>
      <option value="mia">mia</option>
      <option value="julia">julia</option>
      <option value="leah">leah</option>
    </select><br><br>
    <button type="submit">Play Audio</button>
  </form>
  <audio id="audioPlayer" controls autoplay preload="auto"></audio>

  <script>
    const base_url = ``; // <-- replace with your server address

    document.getElementById("promptForm").addEventListener("submit", async function(event) {
      event.preventDefault();

      const prompt = document.getElementById("promptInput").value;
      const voice = document.getElementById("voiceSelect").value;

      const encodedPrompt = encodeURIComponent(prompt);
      const audioUrl = `${base_url}/tts?prompt=` + encodedPrompt + `&voice=${voice}`;

      const audioPlayer = document.getElementById("audioPlayer");
      audioPlayer.src = audioUrl;
      audioPlayer.load();
      audioPlayer.play().catch(err => console.error("Playback error:", err));
    });
  </script>
</body>
</html>
